{% extends "workshop_app/base.html" %}

{% block title %}
My Workshops
{% endblock %}

{% block extra-custom-scripts %}
{% endblock %}

{% block content %}
<div class="container py-4">
{% if not workshops %}
<div class="jumbotron text-center bg-light p-5 rounded-3 shadow-sm">
<h1 class="display-5">Welcome {{ user.first_name }}</h1>
<p class="lead">Information related to your workshops will be shown here. You can also propose a workshop as per your available date in the <strong>Propose Workshop tab</strong>.</p>
</div>
{% else %}
<h3 class="text-center display-6 mb-4">The status of your workshops</h3>

        <!-- Accepted View -->
        <div class="card shadow-lg mb-4">
            <div class="card-header bg-success text-white">
                <h3 class="card-title text-center my-2">Workshops Accepted</h3>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-hover align-middle">
                        <thead>
                            <tr>
                                <th>Workshop Name</th>
                                <th>Instructor Name</th>
                                <th>Workshop Day</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for workshop in workshops %}
                                {% if workshop.status %}
                                    <tr>
                                        <td><a href="{% url 'workshop_app:workshop_details' workshop.id %}" class="link-primary">{{ workshop.workshop_type|capfirst }}</a></td>
                                        <td>{{ workshop.instructor.get_full_name }}</td>
                                        <td>{{ workshop.date|date }}</td>
                                        <td><span class="badge bg-success">{{ workshop.get_status }}</span></td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Proposed View -->
        <div class="card shadow-lg">
            <div class="card-header bg-warning text-dark">
                <h3 class="card-title text-center my-2">Workshops Proposed By Me</h3>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-hover align-middle">
                        <thead>
                            <tr>
                                <th>Workshop Name</th>
                                <th>Workshop Day</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for workshop in workshops %}
                                {% if not workshop.status and workshop.tnc_accepted %}
                                    <tr>
                                        <td><a href="{% url 'workshop_app:workshop_details' workshop.id %}" class="link-primary">{{ workshop.workshop_type|capfirst }}</a></td>
                                        <td>{{ workshop.date|date }}</td>
                                        <td><span class="badge bg-warning text-dark">{{ workshop.get_status }}</span></td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    {% endif %}
</div>

{% endblock %}